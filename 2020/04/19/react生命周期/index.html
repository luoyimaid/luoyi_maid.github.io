<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>react生命周期 | welcome to luoyi&#39;s secret garden</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="⭐react生命周期图解 ⭐react生命周期分有三个大的阶段由于getDefaultProps是通过构造函数进行管理的，所以不在声明周期的三个阶段内，所以只会执行一次  mounting阶段：负责管理生命周期中的getInitialState, componentWillMount, render, componentDidMount recieve_props阶段：负责管理生命周期中的comp">
<meta property="og:type" content="article">
<meta property="og:title" content="react生命周期">
<meta property="og:url" content="http://yoursite.com/2020/04/19/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/index.html">
<meta property="og:site_name" content="welcome to luoyi&#39;s secret garden">
<meta property="og:description" content="⭐react生命周期图解 ⭐react生命周期分有三个大的阶段由于getDefaultProps是通过构造函数进行管理的，所以不在声明周期的三个阶段内，所以只会执行一次  mounting阶段：负责管理生命周期中的getInitialState, componentWillMount, render, componentDidMount recieve_props阶段：负责管理生命周期中的comp">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://b.bdstatic.com/searchbox/icms/searchbox/img/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png">
<meta property="og:image" content="https://b.bdstatic.com/searchbox/icms/searchbox/img/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5.png">
<meta property="article:published_time" content="2020-04-19T10:02:55.725Z">
<meta property="article:modified_time" content="2020-04-19T11:14:12.399Z">
<meta property="article:author" content="少年梦江南">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://b.bdstatic.com/searchbox/icms/searchbox/img/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png">
  
    <link rel="alternate" href="/atom.xml" title="welcome to luoyi&#39;s secret garden" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="fullpage" class="mobile-nav-left">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-left">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-left">
        <section id="main"><article id="post-react生命周期" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      react生命周期
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/19/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="article-date">
  <time datetime="2020-04-19T10:02:55.725Z" itemprop="datePublished">2020-04-19</time>
</a>
    
    
  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h4 id="⭐react生命周期图解"><a href="#⭐react生命周期图解" class="headerlink" title="⭐react生命周期图解"></a>⭐react生命周期图解</h4><p><img src="https://b.bdstatic.com/searchbox/icms/searchbox/img/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png" alt="react生命周期图解"></p>
<h4 id="⭐react生命周期分有三个大的阶段"><a href="#⭐react生命周期分有三个大的阶段" class="headerlink" title="⭐react生命周期分有三个大的阶段"></a>⭐react生命周期分有三个大的阶段</h4><pre><code>由于getDefaultProps是通过构造函数进行管理的，所以不在声明周期的三个阶段内，所以只会执行一次</code></pre><p><img src="https://b.bdstatic.com/searchbox/icms/searchbox/img/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5.png" alt="生命周期的三个大阶段"></p>
<ol>
<li>mounting阶段：负责管理生命周期中的getInitialState, componentWillMount, render, componentDidMount</li>
<li>recieve_props阶段：负责管理生命周期中的componentWillRecieveProps, shouldComponentUpdate, componentWillUpdate, render, compoenntDidUpdate</li>
<li>unmounting阶段：负责管理生命周期中的componentWillUnmount</li>
</ol>
<h4 id="1-mountComponent阶段："><a href="#1-mountComponent阶段：" class="headerlink" title="1. mountComponent阶段："></a>1. mountComponent阶段：</h4><ol>
<li>错误处理方法：performInitialMountWithErrorHandling</li>
<li>初始化挂载方法：performInitialMount<br> i. 如果存在componentWillMount，调用，但是不会触发re-render，而是会进行state合并<br> ii. 如果不是无状态组件，直接开始渲染<br> iii. 得到对应的component类实例</li>
<li>初始化组件，渲染标记，注册事件监听器<br> i. 获取当前元素对应的上下文<br> ii. 初始化公共类<br> iii. 判断组件是否为无状态组件，若是，不会更新队列，只专注于渲染<br> iv. 初始化state<br> v. 错误处理，挂载出错时调用错误处理方法：performInitialMountWithErrorHandling，否则调用初始化挂载方法：performInitialMount方法初始化挂载<br> vi. 最后，如果存在componentDidMount生命周期，调用</li>
</ol>
<h4 id="2-updateComponent阶段"><a href="#2-updateComponent阶段" class="headerlink" title="2. updateComponent阶段"></a>2. updateComponent阶段</h4><pre><code>componentWillRecieveProps， shouldComponentUpdate， componentWillUpdate中调用setstate不会re-render，只会进行state合并，
因为此时的state仍然是未更新数据，获取不到最新的state，所以只有render&amp;compoenntDidUpdate中才能获取到更新后的state</code></pre><ol>
<li>render渲染组件的方法<br> i. 如果需要更新，则继续更新组件，如果不需要，继续渲染，然后拿到更新后的component实例<br> ii. 最后使用render递归渲染</li>
<li>组件确定要更新时，调用即将更新的方法：_performComponentUpdate<br> i. 如果存在componentDidMount，那就将props, state等保存一份<br> ii. 如果存在componentWillUpdate，则调用componentWillUpdate生命周期方法<br> iii. 更新props, state,还有容易忽略的context<br> iv. 调用render组件重新render<br> v. 当组件更新完成之后，如果存在compoenntDidUpdate，则调用</li>
<li>组件更新方法：updateComponent<br> i. 如果存在componentWillRecieveProps，调用<br> ii. 将新的state合并到更新队列，即nextSate就是最新的state<br> iii. 更新队列&amp;shouldComponentUpdate的状态，判断是否需要进行组件更新<br> iv. 确定更新，调用即将更新方法_performComponentUpdate，不确定，更新props,state,context等状态</li>
</ol>
<h4 id="3-unmountComponent阶段"><a href="#3-unmountComponent阶段" class="headerlink" title="3. unmountComponent阶段"></a>3. unmountComponent阶段</h4><pre><code>此时，所有的队列&amp;状态都被重置为null，所以在此处调用setstate不会re-render</code></pre><ol>
<li>如果存在componentWillUnmount，调用</li>
<li>如果组件已经渲染，则对组件进行unmountComponent操作（卸载组件，被渲染组件赋值为null）</li>
<li>执行并重置所有相关参数，更新状态。</li>
</ol>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2020/04/10/virtualDOM/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">react virtual DOM</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    <link rel="stylesheet" href="/css/gitment.css"> 
<script src="/js/gitment.js"></script>

<div id="gitmentContainer"></div>

<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpeg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        少年梦江南
      
    </h3>
    <p class="avatar-slogan">
      前端菜鸟攻城狮，请多多指教
    </p>
  </div>
</div>


  
    

  
    
  <div class="widget-box">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-CSS/" rel="tag">html+CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react%E7%9B%B8%E5%85%B3/" rel="tag">react相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E7%94%9FJS/" rel="tag">原生JS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/html-CSS/" style="font-size: 15px;">html+CSS</a> <a href="/tags/react%E7%9B%B8%E5%85%B3/" style="font-size: 20px;">react相关</a> <a href="/tags/%E5%8E%9F%E7%94%9FJS/" style="font-size: 10px;">原生JS</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/19/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">react生命周期</a>
          </li>
        
          <li>
            <a href="/2020/04/10/virtualDOM/">react virtual DOM</a>
          </li>
        
          <li>
            <a href="/2020/04/03/hocRenderHook/">对比分析HOC,render props,react hook</a>
          </li>
        
          <li>
            <a href="/2020/04/02/jsArray/">原生JS实现常见高阶数组方法</a>
          </li>
        
          <li>
            <a href="/2020/04/02/react_component/">react组件间抽象</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="https://luoyimaid.github.io/" title target='_blank'
        >少年梦江南</a>
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 少年梦江南 &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity" target="_blank" rel="noopener">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">少年告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>